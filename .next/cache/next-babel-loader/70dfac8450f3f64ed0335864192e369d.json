{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { FETCH_ERROR, FETCH_VACATION, FETCH_START, FETCH_SUCCESS } from '../types';\nimport parse from 'html-react-parser';\nexport function fetchVacations() {\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch) {\n      var response, responseData;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              dispatch(fetchStart());\n              _context.prev = 1;\n              _context.next = 4;\n              return fetch('http://wp-test//wp-json/wp/v2/jobopenings');\n\n            case 4:\n              response = _context.sent;\n              _context.next = 7;\n              return response.json();\n\n            case 7:\n              responseData = _context.sent;\n              // const mediaResponse = await fetch('http://wp-test//wp-json/wp/v2/media')\n              // const media = await mediaResponse.json()\n              responseData.forEach(function (postData) {\n                //const content = parse(postData.content.rendered)\n                var vacation = {\n                  id: postData.id,\n                  date: postData.date,\n                  title: postData.title.rendered,\n                  type: postData.type,\n                  author: postData.author,\n\n                  /*categories: postData.categories[0],*/\n                  content: content\n                };\n                /* const mediaFiltered = media.filter(item =>\r\n                     item.post === postData.id\r\n                 )\r\n                 post.media = mediaFiltered*/\n\n                dispatch(fetchVacation(vacation));\n              });\n              dispatch(fetchSuccess());\n              _context.next = 15;\n              break;\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](1);\n              dispatch(fetchError(_context.t0));\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 12]]);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n}\n\nfunction fetchStart() {\n  console.log('fetchStart!!!!');\n  return {\n    type: FETCH_START\n  };\n}\n\nfunction fetchError(e) {\n  console.log('ssss', e);\n  return {\n    type: FETCH_ERROR,\n    error: e\n  };\n}\n\nfunction fetchVacation(vacation) {\n  console.log('fetchVacation!!!!');\n  return {\n    type: FETCH_VACATION,\n    vacation: vacation\n  };\n}\n\nfunction fetchSuccess() {\n  console.log('fetchSuccess!!!!');\n  return {\n    type: FETCH_SUCCESS\n  };\n}","map":{"version":3,"sources":["C:/WebStormProjects/SSR_WP/Store/actions/vacationAction.js"],"names":["FETCH_ERROR","FETCH_VACATION","FETCH_START","FETCH_SUCCESS","parse","fetchVacations","dispatch","fetchStart","fetch","response","json","responseData","forEach","postData","vacation","id","date","title","rendered","type","author","content","fetchVacation","fetchSuccess","fetchError","console","log","e","error"],"mappings":";;AAAA,SACEA,WADF,EAEEC,cAFF,EAGEC,WAHF,EAGeC,aAHf,QAIO,UAJP;AAMA,OAAOC,KAAP,MAAkB,mBAAlB;AAGA,OAAO,SAASC,cAAT,GAA0B;AAC/B;AAAA,wEAAO,iBAAMC,QAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACLA,cAAAA,QAAQ,CAACC,UAAU,EAAX,CAAR;AADK;AAAA;AAAA,qBAGoBC,KAAK,CAAC,2CAAD,CAHzB;;AAAA;AAGGC,cAAAA,QAHH;AAAA;AAAA,qBAIwBA,QAAQ,CAACC,IAAT,EAJxB;;AAAA;AAIGC,cAAAA,YAJH;AAKH;AACA;AACAA,cAAAA,YAAY,CAACC,OAAb,CAAqB,UAAAC,QAAQ,EAAI;AAC/B;AACA,oBAAMC,QAAQ,GAAG;AACfC,kBAAAA,EAAE,EAAEF,QAAQ,CAACE,EADE;AAEfC,kBAAAA,IAAI,EAAEH,QAAQ,CAACG,IAFA;AAGfC,kBAAAA,KAAK,EAAEJ,QAAQ,CAACI,KAAT,CAAeC,QAHP;AAIfC,kBAAAA,IAAI,EAAEN,QAAQ,CAACM,IAJA;AAKfC,kBAAAA,MAAM,EAAEP,QAAQ,CAACO,MALF;;AAMf;AACAC,kBAAAA,OAAO,EAAPA;AAPe,iBAAjB;AAUD;;;;;AAICf,gBAAAA,QAAQ,CAACgB,aAAa,CAACR,QAAD,CAAd,CAAR;AACD,eAjBD;AAkBAR,cAAAA,QAAQ,CAACiB,YAAY,EAAb,CAAR;AAzBG;AAAA;;AAAA;AAAA;AAAA;AA4BHjB,cAAAA,QAAQ,CAACkB,UAAU,aAAX,CAAR;;AA5BG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAP;;AAAA;AAAA;AAAA;AAAA;AA+BD;;AAED,SAASjB,UAAT,GAAuB;AACrBkB,EAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACA,SAAO;AACLP,IAAAA,IAAI,EAAEjB;AADD,GAAP;AAGD;;AAED,SAASsB,UAAT,CAAqBG,CAArB,EAAwB;AACtBF,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAmBC,CAAnB;AACA,SAAO;AACLR,IAAAA,IAAI,EAAEnB,WADD;AAEL4B,IAAAA,KAAK,EAAED;AAFF,GAAP;AAID;;AAED,SAASL,aAAT,CAAwBR,QAAxB,EAAkC;AAChCW,EAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACA,SAAO;AACLP,IAAAA,IAAI,EAAElB,cADD;AAELa,IAAAA,QAAQ,EAARA;AAFK,GAAP;AAID;;AAED,SAASS,YAAT,GAAyB;AACvBE,EAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACA,SAAO;AACLP,IAAAA,IAAI,EAAEhB;AADD,GAAP;AAGD","sourcesContent":["import {\r\n  FETCH_ERROR,\r\n  FETCH_VACATION,\r\n  FETCH_START, FETCH_SUCCESS\r\n} from '../types'\r\n\r\nimport parse from 'html-react-parser';\r\n\r\n\r\nexport function fetchVacations() {\r\n  return async dispatch => {\r\n    dispatch(fetchStart())\r\n    try {\r\n      const response = await fetch('http://wp-test//wp-json/wp/v2/jobopenings')\r\n      const responseData = await response.json()\r\n      // const mediaResponse = await fetch('http://wp-test//wp-json/wp/v2/media')\r\n      // const media = await mediaResponse.json()\r\n      responseData.forEach(postData => {\r\n        //const content = parse(postData.content.rendered)\r\n        const vacation = {\r\n          id: postData.id,\r\n          date: postData.date,\r\n          title: postData.title.rendered,\r\n          type: postData.type,\r\n          author: postData.author,\r\n          /*categories: postData.categories[0],*/\r\n          content\r\n        }\r\n\r\n       /* const mediaFiltered = media.filter(item =>\r\n            item.post === postData.id\r\n        )\r\n        post.media = mediaFiltered*/\r\n        dispatch(fetchVacation(vacation))\r\n      })\r\n      dispatch(fetchSuccess())\r\n\r\n    } catch (e) {\r\n      dispatch(fetchError(e))\r\n    }\r\n  }\r\n}\r\n\r\nfunction fetchStart () {\r\n  console.log('fetchStart!!!!')\r\n  return {\r\n    type: FETCH_START\r\n  }\r\n}\r\n\r\nfunction fetchError (e) {\r\n  console.log('ssss',e)\r\n  return {\r\n    type: FETCH_ERROR,\r\n    error: e\r\n  }\r\n}\r\n\r\nfunction fetchVacation (vacation) {\r\n  console.log('fetchVacation!!!!')\r\n  return {\r\n    type: FETCH_VACATION,\r\n    vacation\r\n  }\r\n}\r\n\r\nfunction fetchSuccess () {\r\n  console.log('fetchSuccess!!!!')\r\n  return {\r\n    type: FETCH_SUCCESS\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}