{"ast":null,"code":"import { FETCH_ERROR, FETCH_VACATION, FETCH_START, FETCH_SUCCESS } from '../types';\nimport parse from 'html-react-parser';\nexport function fetchVacations() {\n  return async dispatch => {\n    dispatch(fetchStart());\n\n    try {\n      const response = await fetch('http://wp-test//wp-json/wp/v2/jobopenings');\n      const responseData = await response.json(); // const mediaResponse = await fetch('http://wp-test//wp-json/wp/v2/media')\n      // const media = await mediaResponse.json()\n\n      const vacations = [];\n      responseData.forEach(postData => {\n        const content = parse(postData.content.rendered);\n        const vacation = {\n          id: postData.id,\n          date: postData.date,\n          title: postData.title.rendered,\n          type: postData.type,\n          author: postData.author,\n\n          /*categories: postData.categories[0],*/\n          content\n        };\n        /* const mediaFiltered = media.filter(item =>\r\n             item.post === postData.id\r\n         )\r\n         post.media = mediaFiltered*/\n\n        vacations.push(vacation);\n      });\n      console.log(vacations);\n      dispatch(fetchVacation(vacations));\n      dispatch(fetchSuccess());\n    } catch (e) {\n      dispatch(fetchError(e));\n    }\n  };\n}\n\nfunction fetchStart() {\n  console.log('fetchStart!!!!');\n  return {\n    type: FETCH_START\n  };\n}\n\nfunction fetchError(e) {\n  console.log('ssss', e);\n  return {\n    type: FETCH_ERROR,\n    error: e\n  };\n}\n\nfunction fetchVacation(vacation) {\n  console.log('fetchVacation!!!!');\n  return {\n    type: FETCH_VACATION,\n    vacation\n  };\n}\n\nfunction fetchSuccess() {\n  console.log('fetchSuccess!!!!');\n  return {\n    type: FETCH_SUCCESS\n  };\n}","map":{"version":3,"sources":["C:/WebStormProjects/SSR_WP/Store/actions/vacationAction.js"],"names":["FETCH_ERROR","FETCH_VACATION","FETCH_START","FETCH_SUCCESS","parse","fetchVacations","dispatch","fetchStart","response","fetch","responseData","json","vacations","forEach","postData","content","rendered","vacation","id","date","title","type","author","push","console","log","fetchVacation","fetchSuccess","e","fetchError","error"],"mappings":"AAAA,SACEA,WADF,EAEEC,cAFF,EAGEC,WAHF,EAGeC,aAHf,QAIO,UAJP;AAMA,OAAOC,KAAP,MAAkB,mBAAlB;AAGA,OAAO,SAASC,cAAT,GAA0B;AAC/B,SAAO,MAAMC,QAAN,IAAkB;AACvBA,IAAAA,QAAQ,CAACC,UAAU,EAAX,CAAR;;AACA,QAAI;AACF,YAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,2CAAD,CAA5B;AACA,YAAMC,YAAY,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAA3B,CAFE,CAGF;AACA;;AACA,YAAMC,SAAS,GAAG,EAAlB;AACAF,MAAAA,YAAY,CAACG,OAAb,CAAqBC,QAAQ,IAAI;AAC/B,cAAMC,OAAO,GAAGX,KAAK,CAACU,QAAQ,CAACC,OAAT,CAAiBC,QAAlB,CAArB;AACA,cAAMC,QAAQ,GAAG;AACfC,UAAAA,EAAE,EAAEJ,QAAQ,CAACI,EADE;AAEfC,UAAAA,IAAI,EAAEL,QAAQ,CAACK,IAFA;AAGfC,UAAAA,KAAK,EAAEN,QAAQ,CAACM,KAAT,CAAeJ,QAHP;AAIfK,UAAAA,IAAI,EAAEP,QAAQ,CAACO,IAJA;AAKfC,UAAAA,MAAM,EAAER,QAAQ,CAACQ,MALF;;AAMf;AACAP,UAAAA;AAPe,SAAjB;AAUD;;;;;AAICH,QAAAA,SAAS,CAACW,IAAV,CAAeN,QAAf;AAED,OAlBD;AAmBAO,MAAAA,OAAO,CAACC,GAAR,CAAYb,SAAZ;AACAN,MAAAA,QAAQ,CAACoB,aAAa,CAACd,SAAD,CAAd,CAAR;AACAN,MAAAA,QAAQ,CAACqB,YAAY,EAAb,CAAR;AAED,KA7BD,CA6BE,OAAOC,CAAP,EAAU;AACVtB,MAAAA,QAAQ,CAACuB,UAAU,CAACD,CAAD,CAAX,CAAR;AACD;AACF,GAlCD;AAmCD;;AAED,SAASrB,UAAT,GAAuB;AACrBiB,EAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACA,SAAO;AACLJ,IAAAA,IAAI,EAAEnB;AADD,GAAP;AAGD;;AAED,SAAS2B,UAAT,CAAqBD,CAArB,EAAwB;AACtBJ,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAmBG,CAAnB;AACA,SAAO;AACLP,IAAAA,IAAI,EAAErB,WADD;AAEL8B,IAAAA,KAAK,EAAEF;AAFF,GAAP;AAID;;AAED,SAASF,aAAT,CAAwBT,QAAxB,EAAkC;AAChCO,EAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACA,SAAO;AACLJ,IAAAA,IAAI,EAAEpB,cADD;AAELgB,IAAAA;AAFK,GAAP;AAID;;AAED,SAASU,YAAT,GAAyB;AACvBH,EAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACA,SAAO;AACLJ,IAAAA,IAAI,EAAElB;AADD,GAAP;AAGD","sourcesContent":["import {\r\n  FETCH_ERROR,\r\n  FETCH_VACATION,\r\n  FETCH_START, FETCH_SUCCESS\r\n} from '../types'\r\n\r\nimport parse from 'html-react-parser';\r\n\r\n\r\nexport function fetchVacations() {\r\n  return async dispatch => {\r\n    dispatch(fetchStart())\r\n    try {\r\n      const response = await fetch('http://wp-test//wp-json/wp/v2/jobopenings')\r\n      const responseData = await response.json()\r\n      // const mediaResponse = await fetch('http://wp-test//wp-json/wp/v2/media')\r\n      // const media = await mediaResponse.json()\r\n      const vacations = []\r\n      responseData.forEach(postData => {\r\n        const content = parse(postData.content.rendered)\r\n        const vacation = {\r\n          id: postData.id,\r\n          date: postData.date,\r\n          title: postData.title.rendered,\r\n          type: postData.type,\r\n          author: postData.author,\r\n          /*categories: postData.categories[0],*/\r\n          content\r\n        }\r\n\r\n       /* const mediaFiltered = media.filter(item =>\r\n            item.post === postData.id\r\n        )\r\n        post.media = mediaFiltered*/\r\n        vacations.push(vacation)\r\n\r\n      })\r\n      console.log(vacations)\r\n      dispatch(fetchVacation(vacations))\r\n      dispatch(fetchSuccess())\r\n\r\n    } catch (e) {\r\n      dispatch(fetchError(e))\r\n    }\r\n  }\r\n}\r\n\r\nfunction fetchStart () {\r\n  console.log('fetchStart!!!!')\r\n  return {\r\n    type: FETCH_START\r\n  }\r\n}\r\n\r\nfunction fetchError (e) {\r\n  console.log('ssss',e)\r\n  return {\r\n    type: FETCH_ERROR,\r\n    error: e\r\n  }\r\n}\r\n\r\nfunction fetchVacation (vacation) {\r\n  console.log('fetchVacation!!!!')\r\n  return {\r\n    type: FETCH_VACATION,\r\n    vacation\r\n  }\r\n}\r\n\r\nfunction fetchSuccess () {\r\n  console.log('fetchSuccess!!!!')\r\n  return {\r\n    type: FETCH_SUCCESS\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}