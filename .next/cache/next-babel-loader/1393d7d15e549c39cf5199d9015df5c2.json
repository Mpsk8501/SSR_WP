{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\WebStormProjects\\\\SSR_WP\\\\pages\\\\JobOpenings\\\\index.js\";\n\nvar __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { MainLayout } from '../../Layout/MainLayout';\nimport JobOpeningsComponent from '../../components/JobOpeningsComponent/JobOpeningsComponent';\nimport { fetchVacations } from '../../Store/actions/vacationAction';\nimport Loader from '../../components/Loader/Loader';\nimport parse from 'html-react-parser';\n\nvar JobOpenings = function JobOpenings(_ref) {\n  var vacations = _ref.vacations;\n  var loading = false;\n  /*const dispatch = useDispatch()\r\n  const loading = useSelector(state => state.vacations.loading)\r\n  const vacations = useSelector(state => state.vacations.vacations)\r\n  useEffect(() =>{\r\n    if(Object.keys(vacations).length){\r\n      return\r\n    }\r\n    dispatch(fetchVacations())\r\n  },[])*/\n\n  return __jsx(MainLayout, {\n    title: 'Вакансии',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: 'flexWrapper',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 7\n    }\n  }, loading ? __jsx(Loader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 15\n    }\n  }) : __jsx(JobOpeningsComponent, {\n    vacations: vacations,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 15\n    }\n  })));\n};\n\n_c = JobOpenings;\nexport default JobOpenings;\nJobOpenings.getInitialProps = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n  var response, responseData, vacations;\n  return _regeneratorRuntime.wrap(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return fetch('http://wp-test//wp-json/wp/v2/jobopenings');\n\n        case 2:\n          response = _context.sent;\n          _context.next = 5;\n          return response.json();\n\n        case 5:\n          responseData = _context.sent;\n          vacations = [];\n          responseData.forEach(function (postData) {\n            var content = parse(postData.content.rendered);\n            var vacation = {\n              id: postData.id,\n              date: postData.date,\n              title: postData.title.rendered,\n              type: postData.type,\n              author: postData.author,\n              content: content\n            };\n            vacations.push(vacation);\n          });\n          return _context.abrupt(\"return\", {\n            vacations: vacations\n          });\n\n        case 9:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _callee);\n}));\n\nvar _c;\n\n$RefreshReg$(_c, \"JobOpenings\");","map":{"version":3,"sources":["C:/WebStormProjects/SSR_WP/pages/JobOpenings/index.js"],"names":["React","useEffect","useDispatch","useSelector","MainLayout","JobOpeningsComponent","fetchVacations","Loader","parse","JobOpenings","vacations","loading","getInitialProps","fetch","response","json","responseData","forEach","postData","content","rendered","vacation","id","date","title","type","author","push"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,UAAT,QAA2B,yBAA3B;AACA,OAAOC,oBAAP,MAAiC,4DAAjC;AACA,SAASC,cAAT,QAA+B,oCAA/B;AACA,OAAOC,MAAP,MAAmB,gCAAnB;AACA,OAAOC,KAAP,MAAkB,mBAAlB;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,OAAiB;AAAA,MAAfC,SAAe,QAAfA,SAAe;AACnC,MAAMC,OAAO,GAAG,KAAhB;AACA;;;;;;;;;;AAUA,SACE,MAAC,UAAD;AAAY,IAAA,KAAK,EAAE,UAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAE,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEIA,OAAO,GACH,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADG,GAEH,MAAC,oBAAD;AACE,IAAA,SAAS,EAAED,SADb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJR,CADF,CADF;AAcD,CA1BD;;KAAMD,W;AA4BN,eAAeA,WAAf;AACAA,WAAW,CAACG,eAAZ,yEAA8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBACLC,KAAK,CAAC,2CAAD,CADA;;AAAA;AACtBC,UAAAA,QADsB;AAAA;AAAA,iBAEDA,QAAQ,CAACC,IAAT,EAFC;;AAAA;AAEtBC,UAAAA,YAFsB;AAGtBN,UAAAA,SAHsB,GAGV,EAHU;AAI5BM,UAAAA,YAAY,CAACC,OAAb,CAAqB,UAAAC,QAAQ,EAAI;AAC/B,gBAAMC,OAAO,GAAGX,KAAK,CAACU,QAAQ,CAACC,OAAT,CAAiBC,QAAlB,CAArB;AACA,gBAAMC,QAAQ,GAAG;AACfC,cAAAA,EAAE,EAAEJ,QAAQ,CAACI,EADE;AAEfC,cAAAA,IAAI,EAAEL,QAAQ,CAACK,IAFA;AAGfC,cAAAA,KAAK,EAAEN,QAAQ,CAACM,KAAT,CAAeJ,QAHP;AAIfK,cAAAA,IAAI,EAAEP,QAAQ,CAACO,IAJA;AAKfC,cAAAA,MAAM,EAAER,QAAQ,CAACQ,MALF;AAMfP,cAAAA,OAAO,EAAPA;AANe,aAAjB;AAQAT,YAAAA,SAAS,CAACiB,IAAV,CAAeN,QAAf;AACD,WAXD;AAJ4B,2CAgBrB;AACLX,YAAAA,SAAS,EAATA;AADK,WAhBqB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAA9B","sourcesContent":["import React, { useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { MainLayout } from '../../Layout/MainLayout'\r\nimport JobOpeningsComponent from '../../components/JobOpeningsComponent/JobOpeningsComponent'\r\nimport { fetchVacations } from '../../Store/actions/vacationAction'\r\nimport Loader from '../../components/Loader/Loader'\r\nimport parse from 'html-react-parser'\r\n\r\nconst JobOpenings = ({vacations}) => {\r\n  const loading = false\r\n  /*const dispatch = useDispatch()\r\n  const loading = useSelector(state => state.vacations.loading)\r\n  const vacations = useSelector(state => state.vacations.vacations)\r\n  useEffect(() =>{\r\n    if(Object.keys(vacations).length){\r\n      return\r\n    }\r\n    dispatch(fetchVacations())\r\n  },[])*/\r\n\r\n  return (\r\n    <MainLayout title={'Вакансии'}>\r\n      <div className={'flexWrapper'}>\r\n        {\r\n          loading\r\n            ? <Loader/>\r\n            : <JobOpeningsComponent\r\n                vacations={vacations}\r\n              />\r\n        }\r\n      </div>\r\n    </MainLayout>\r\n\r\n  )\r\n}\r\n\r\nexport default JobOpenings\r\nJobOpenings.getInitialProps = async () => {\r\n  const response = await fetch('http://wp-test//wp-json/wp/v2/jobopenings')\r\n  const responseData = await response.json()\r\n  const vacations = []\r\n  responseData.forEach(postData => {\r\n    const content = parse(postData.content.rendered)\r\n    const vacation = {\r\n      id: postData.id,\r\n      date: postData.date,\r\n      title: postData.title.rendered,\r\n      type: postData.type,\r\n      author: postData.author,\r\n      content\r\n    }\r\n    vacations.push(vacation)\r\n  })\r\n  return {\r\n    vacations\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}